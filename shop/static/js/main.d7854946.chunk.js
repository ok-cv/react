(this["webpackJsonpreact-shop"]=this["webpackJsonpreact-shop"]||[]).push([[0],{46:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c(23),i=c.n(s),r=c(7),n=c(30),l=c(17),o=c(24),d=c(31),j=c.n(d),b=c(33),m=c(32);const h={sections:[{title:"Ancient Books",imageUrl:"https://images.unsplash.com/photo-1535905557558-afc4877a26fc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80",id:1,linkUrl:"store/ancient"},{title:"Modern Books",imageUrl:"https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1890&q=80",id:2,linkUrl:"store/modern"},{title:"Used Books",imageUrl:"https://images.unsplash.com/photo-1476081718509-d5d0b661a376?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80",id:3,linkUrl:"store/used"},{title:"New Books",imageUrl:"https://images.unsplash.com/photo-1544640808-32ca72ac7f37?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8bGlicmFyeXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=800&q=60",id:4,linkUrl:"store/new"}]};var u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;return t.type,e};const O="FETCH_COLLECTIONS_START",x="FETCH_COLLECTIONS_SUCCESS",p="FETCH_COLLECTIONS_FAILURE",v={sections:null,isFetching:!1,errorMessage:void 0};var g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{...e,isFetching:!0};case x:return{...e,isFetching:!1,sections:t.payload};case p:return{...e,isFetching:!1,errorMessage:t.payload};default:return e}};const y="SET_CURRENT_USER",N={currentUser:null};var f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;return t.type===y?{...e,currentUser:t.payload}:e};const w="TOGGLE_CART_HIDDEN",C="ADD_ITEM",I="REMOVE_ITEM",E="CLEAR_ITEM",k="CLEAR_CART",U=(e,t)=>{let c;return c=e.find((e=>e.id===t.id))?e.map((e=>e.id===t.id?{...e,quantity:e.quantity+1}:e)):[...e,{...t,quantity:1}],c},A=(e,t)=>{let c;return c=1!==e.find((e=>e.id===t.id)).quantity?e.map((e=>e.id===t.id?{...e,quantity:e.quantity-1}:e)):e.filter((e=>e.id!==t.id)),c},S=(e,t)=>{let c;return c=e.filter((e=>e.id!==t.id)),c},R={hidden:!0,cartItems:[]};var L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{...e,hidden:!e.hidden};case C:return{...e,cartItems:U(e.cartItems,t.payload)};case I:return{...e,cartItems:A(e.cartItems,t.payload)};case E:return{...e,cartItems:S(e.cartItems,t.payload)};case k:return{...e,cartItems:[]};default:return e}};const M={key:"root",storage:c.n(m).a,whitelist:["cart"]},T=Object(l.b)({directory:u,collection:g,user:f,cart:L});var F=Object(o.a)(M,T);const H=[j.a,b.a],D=Object(l.c)(F,Object(l.a)(...H)),G=Object(o.b)(D);var _=c(16),q=c(8),B=c(5);const P=Object(B.a)([e=>e.user],(e=>e.currentUser));var $=c(18);c(42),c(58);const W=async(e,t)=>{if(!e)return;const c=Y.doc(`users/${e.uid}`);if(!(await c.get()).exists){const{displayName:s,email:i}=e,r=new Date;try{await c.set({displayName:s,email:i,createdAt:r,...t})}catch(a){console.log("error creating user",a.message)}}return c};$.a.apps.length?$.a.app():$.a.initializeApp({apiKey:"AIzaSyBFhRI7wSxsAgaVIsChy46OFXcEi1qR_-A",authDomain:"react-redux-shop-cd7f2.firebaseapp.com",projectId:"react-redux-shop-cd7f2",storageBucket:"react-redux-shop-cd7f2.appspot.com",messagingSenderId:"1096222963957",appId:"1:1096222963957:web:9994740a69e5d5770f6dbc"});const V=$.a.auth(),Y=$.a.firestore(),z=new $.a.auth.GoogleAuthProvider;z.setCustomParameters({prompt:"select_account"});const J=()=>V.signInWithPopup(z);$.a;var X=c(1);var K=()=>Object(X.jsx)("div",{className:"container w-300 py-5",children:Object(X.jsx)("ul",{className:"list-group",children:["React 17","Router 5","Redux","Thunk","Reselect","Firebase","Google Sign-In"].map(((e,t)=>Object(X.jsx)("li",{className:"list-group-item bg-light",children:e},t)))})});const Q=e=>e.cart,Z=Object(B.a)([Q],(e=>e.hidden)),ee=Object(B.a)([Q],(e=>e.cartItems)),te=Object(B.a)([ee],(e=>e.reduce(((e,t)=>e+t.quantity),0))),ce=Object(B.a)([ee],(e=>e.reduce(((e,t)=>e+t.quantity*t.price),0))),ae=()=>({type:w}),se=e=>({type:C,payload:e});c(46);const ie=Object(B.b)({cartItems:ee});var re=Object(q.g)(Object(r.b)(ie,(e=>({toggleCartHidden:()=>e(ae())})))((e=>{let{cartItems:t,toggleCartHidden:c,history:a}=e;return Object(X.jsxs)("div",{className:"cart-dropdown",children:[Object(X.jsx)("div",{className:"cart-dropdown-items",children:t.length>0?t.map((e=>Object(X.jsx)(oe,{cartItem:e},e.id))):"Cart is empty."}),Object(X.jsx)(ge,{onClick:()=>{a.push("/checkout"),c()},children:"Go to Checkout"})]})})));c(50);const ne=Object(B.b)({itemCount:te});var le=Object(r.b)(ne,(e=>({toggleCartHidden:()=>e(ae())})))((e=>{let{toggleCartHidden:t,itemCount:c}=e;return Object(X.jsxs)("a",{onClick:t,children:["Cart: ",c]})}));c(51);var oe=e=>{let{cartItem:{imageUrl:t,name:c,price:a,quantity:s}}=e;return Object(X.jsxs)("div",{className:"cart-item",children:[Object(X.jsx)("div",{className:"cart-item-image",style:{backgroundImage:`url(${t})`}}),Object(X.jsxs)("div",{className:"cart-item-info",children:[c,Object(X.jsx)("br",{}),s," x ",new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(a)]})]})};c(52);var de=Object(r.b)(null,(e=>({addItem:t=>e(se(t)),removeItem:t=>e({type:I,payload:t}),clearItem:t=>e({type:E,payload:t})})))((e=>{let{cartItem:t,addItem:c,removeItem:a,clearItem:s}=e;const{imageUrl:i,name:r,price:n,quantity:l}=t;return Object(X.jsx)("div",{className:"checkout-item",children:Object(X.jsxs)("div",{className:"row align-items-center",children:[Object(X.jsx)("div",{className:"col-2",children:Object(X.jsx)("div",{className:"checkout-image",style:{backgroundImage:`url(${i})`}})}),Object(X.jsx)("div",{className:"col-3",children:r}),Object(X.jsx)("div",{className:"col-3",children:Object(X.jsxs)("div",{className:"d-flex align-items-center",children:[Object(X.jsx)("div",{className:"inc-dec",onClick:()=>a(t),children:Object(X.jsx)("div",{className:"icon",children:Object(X.jsx)("i",{className:"bi bi-chevron-left"})})}),Object(X.jsx)("span",{children:l}),Object(X.jsx)("div",{className:"inc-dec",onClick:()=>c(t),children:Object(X.jsx)("div",{className:"icon",children:Object(X.jsx)("i",{className:"bi bi-chevron-right"})})})]})}),Object(X.jsx)("div",{className:"col-2 text-end",children:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(n)}),Object(X.jsx)("div",{className:"col-2",children:Object(X.jsx)("div",{className:"d-flex justify-content-end",children:Object(X.jsx)("a",{onClick:()=>s(t),children:Object(X.jsx)("div",{className:"icon",children:Object(X.jsx)("i",{className:"bi bi-x"})})})})})]})})}));c(53);var je=Object(r.b)(null,(e=>({addItem:t=>e(se(t))})))((e=>{let{item:t,item:{imageUrl:c,name:a,price:s},addItem:i}=e;return Object(X.jsxs)("div",{className:"collection-item",children:[Object(X.jsx)("div",{className:"image",style:{backgroundImage:`url(${c})`}}),Object(X.jsxs)("div",{className:"footer",children:[Object(X.jsx)("div",{className:"name",children:a}),Object(X.jsx)("div",{className:"price",children:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(s)})]}),Object(X.jsx)(ge,{onClick:()=>i(t),children:"Add to Cart"})]})}));const be=e=>e.collection,me=Object(B.a)([be],(e=>e.sections)),he=Object(B.a)([me],(e=>e?Object.keys(e).map((t=>e[t])):[])),ue=Object(B.a)([be],(e=>e.isFetching)),Oe=Object(B.a)([be],(e=>!!e.sections)),xe=Object(B.b)({collectionSectionsArray:he});var pe=Object(r.b)(xe)((e=>{let{collectionSectionsArray:t}=e;return Object(X.jsx)(X.Fragment,{children:t.map((e=>{let{id:t,...c}=e;return Object(X.jsx)(ve,{...c},t)}))})}));c(54);var ve=e=>{let{title:t,items:c}=e;return Object(X.jsxs)("div",{className:"collection-preview",children:[Object(X.jsx)("div",{className:"display-6",children:t}),Object(X.jsx)("div",{className:"preview",children:c.filter(((e,t)=>t<4)).map((e=>Object(X.jsx)(je,{item:e},e.id)))})]})};var ge=e=>{let{children:t,isGoogleSignIn:c,...a}=e;return Object(X.jsx)("button",{className:"btn btn-block "+(c?"btn-secondary":"btn-primary"),...a,children:t})};c(55);var ye=Object(q.g)((e=>{let{title:t,imageUrl:c,linkUrl:a,match:s,history:i}=e;return Object(X.jsx)("div",{className:"directory-item",style:{backgroundImage:`url(${c})`},onClick:()=>i.push(`${s.url}${a}`),children:Object(X.jsx)("div",{className:"title",children:t})})}));const Ne=Object(B.a)([e=>e.directory],(e=>e.sections));c(56);const fe=Object(B.b)({directorySections:Ne});var we=Object(r.b)(fe)((e=>{let{directorySections:t}=e;return Object(X.jsx)("div",{className:"directory-menu",children:t.map((e=>{let{id:t,...c}=e;return Object(X.jsx)(ye,{...c},t)}))})}));var Ce=()=>{const[e,t]=Object(a.useState)({email:"",password:""}),c=(c,a)=>t({...e,[c]:a});return Object(X.jsx)("form",{onSubmit:async c=>{c.preventDefault();try{await V.signInWithEmailAndPassword(e.email,e.password),t({email:"",password:""})}catch(a){console.log("error signing in",a.message)}},children:Object(X.jsxs)("div",{className:"row gy-4",children:[Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)("div",{className:"display-6",children:"Login"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(Ae,{value:e.email,onChange:(e,t)=>c(e,t),label:"E-Mail",name:"email"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(Ue,{value:e.password,onChange:(e,t)=>c(e,t),label:"Password",name:"password"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(ge,{type:"submit",children:"Login with E-Mail"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(ge,{type:"button",onClick:J,isGoogleSignIn:!0,children:"Login with Google"})})]})})};var Ie=()=>{const[e,t]=Object(a.useState)({displayName:"",email:"",password:"",confirmPassword:""}),c=(c,a)=>t({...e,[c]:a});return Object(X.jsx)("form",{onSubmit:async c=>{if(c.preventDefault(),e.password===e.confirmPassword)try{const{user:c}=await V.createUserWithEmailAndPassword(e.email,e.password);await W(c,{displayName:e.displayName}),t({displayName:"",email:"",password:"",confirmPassword:""})}catch(a){console.log("error signing up",a.message)}else alert("passwords dont match")},children:Object(X.jsxs)("div",{className:"row gy-4",children:[Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)("div",{className:"display-6",children:"Register"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(Ae,{value:e.displayName,onChange:(e,t)=>c(e,t),label:"Name",name:"displayName"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(Ae,{value:e.email,onChange:(e,t)=>c(e,t),label:"E-Mail",name:"email"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(Ue,{value:e.password,onChange:(e,t)=>c(e,t),label:"Password",name:"password"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(Ue,{value:e.confirmPassword,onChange:(e,t)=>c(e,t),label:"Confirm Password",name:"confirmPassword"})}),Object(X.jsx)("div",{className:"col-12",children:Object(X.jsx)(ge,{type:"submit",children:"Register with E-Mail"})})]})})};const Ee=Object(B.b)({currentUser:P,hidden:Z});var ke=Object(r.b)(Ee)((e=>{let{currentUser:t,hidden:c}=e;return Object(X.jsxs)("div",{className:"react-pills",children:[Object(X.jsx)(_.b,{exact:!0,to:"/",activeClassName:"active",children:"Home"}),Object(X.jsx)(_.b,{to:"/store",activeClassName:"active",children:"Store"}),t?Object(X.jsx)("a",{onClick:()=>V.signOut(),children:"Logout"}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(_.b,{exact:!0,to:"/login",activeClassName:"active",children:"Login"}),Object(X.jsx)(_.b,{exact:!0,to:"/register",activeClassName:"active",children:"Register"})]}),Object(X.jsx)(_.b,{exact:!0,to:"/about",activeClassName:"active",children:"About"}),Object(X.jsx)(le,{}),c?null:Object(X.jsx)(re,{})]})}));var Ue=e=>{let{value:t,onChange:c,label:a,name:s}=e;return Object(X.jsxs)("div",{className:"form-floating",children:[Object(X.jsx)("input",{className:"form-control",value:t,onChange:e=>c(s,e.target.value),type:"password",placeholder:" "}),Object(X.jsx)("label",{children:a})]})};var Ae=e=>{let{value:t,onChange:c,label:a,name:s}=e;return Object(X.jsxs)("div",{className:"form-floating",children:[Object(X.jsx)("input",{className:"form-control",value:t,onChange:e=>c(s,e.target.value),type:"text",placeholder:" "}),Object(X.jsx)("label",{children:a})]})};const Se=Object(B.b)({cartItems:ee,cartTotal:ce});var Re=Object(r.b)(Se,(e=>({clearCart:()=>e({type:k})})))((e=>{let{cartItems:t,cartTotal:c,clearCart:a}=e;return Object(X.jsxs)("div",{className:"container py-5",children:[Object(X.jsx)("div",{className:"checkout-item",children:Object(X.jsxs)("div",{className:"row",children:[Object(X.jsx)("div",{className:"col-2",children:"IMAGE"}),Object(X.jsx)("div",{className:"col-3",children:"NAME"}),Object(X.jsx)("div",{className:"col-3",children:"QUANTITY"}),Object(X.jsx)("div",{className:"col-2 text-end",children:"PRICE"}),Object(X.jsx)("div",{className:"col-2 text-end",children:"DELETE"})]})}),t.map((e=>Object(X.jsx)(de,{cartItem:e},e.id))),Object(X.jsxs)("div",{className:"row justify-content-center pt-5",children:[Object(X.jsx)("div",{className:"col-12",children:Object(X.jsxs)("div",{className:"display-6 text-center mb-5",children:["TOTAL: ",new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(c)]})}),Object(X.jsx)("div",{className:"col-auto",children:Object(X.jsx)(ge,{onClick:a,children:"CLEAR ALL"})})]})]})}));var Le=Object(r.b)(((e,t)=>{return{collection:(c=t.match.params.collectionName,Object(B.a)([me],(e=>e?e[c]:null)))(e)};var c}))((e=>{let{collection:{title:t,items:c}}=e;return Object(X.jsxs)("div",{className:"collection-preview",children:[Object(X.jsx)("div",{className:"display-6",children:t}),Object(X.jsx)("div",{className:"preview",children:c.map((e=>Object(X.jsx)(je,{item:e},e.id)))})]})}));var Me=()=>Object(X.jsx)("div",{className:"container py-5",children:Object(X.jsx)(we,{})});var Te=()=>Object(X.jsx)("div",{className:"container w-300 py-5",children:Object(X.jsx)(Ce,{})});var Fe=()=>Object(X.jsx)("div",{className:"container w-300 py-5",children:Object(X.jsx)(Ie,{})});const He=()=>e=>{const t=Y.collection("collections");e({type:O}),t.get().then((t=>{const c=t.docs.map((e=>{const{title:t,items:c}=e.data();return{routeName:encodeURI(t.toLowerCase()),id:e.id,title:t,items:c}})).reduce(((e,t)=>(e[t.title.toLowerCase()]=t,e)),{});e((e=>({type:x,payload:e}))(c))})).catch((t=>{var c;e((c=t.message,{type:p,payload:c}))}))},De=Object(B.b)({isCollectionFetching:ue,isCollectionLoaded:Oe});var Ge=Object(r.b)(De,(e=>({fetchCollectionsStartAsync:()=>e(He())})))((e=>{let{match:t,isCollectionFetching:c,isCollectionLoaded:s,fetchCollectionsStartAsync:i}=e;return Object(a.useEffect)((()=>{i()}),[]),c||!s?Object(X.jsx)("div",{className:"mt-6 pt-6 text-center",children:"Loading..."}):Object(X.jsxs)("div",{className:"container py-5",children:[Object(X.jsx)(q.b,{exact:!0,path:`${t.path}`,component:pe}),Object(X.jsx)(q.b,{path:`${t.path}/:collectionName`,component:Le})]})}));const _e=Object(B.b)({currentUser:P});var qe=Object(r.b)(_e,(e=>({setCurrentUser:t=>e((e=>({type:y,payload:e}))(t))})))((e=>{let{currentUser:t,setCurrentUser:c}=e;return Object(a.useEffect)((()=>{const e=V.onAuthStateChanged((async e=>{if(e){(await W(e)).onSnapshot((e=>{c({id:e.id,...e.data()})}))}else c(e)}));return()=>{e()}}),[]),Object(X.jsxs)(_.a,{children:[Object(X.jsx)(ke,{}),Object(X.jsxs)(q.d,{children:[Object(X.jsx)(q.b,{exact:!0,path:"/",component:Me}),Object(X.jsx)(q.b,{path:"/store",component:Ge}),Object(X.jsx)(q.b,{exact:!0,path:"/checkout",component:Re}),Object(X.jsx)(q.b,{exact:!0,path:"/login",render:()=>t?Object(X.jsx)(q.a,{to:"/"}):Object(X.jsx)(Te,{})}),Object(X.jsx)(q.b,{exact:!0,path:"/register",render:()=>t?Object(X.jsx)(q.a,{to:"/"}):Object(X.jsx)(Fe,{})}),Object(X.jsx)(q.b,{exact:!0,path:"/about",component:K})]})]})}));i.a.render(Object(X.jsx)(r.a,{store:D,children:Object(X.jsx)(n.a,{persistor:G,children:Object(X.jsx)(qe,{})})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.d7854946.chunk.js.map